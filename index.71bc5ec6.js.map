{"mappings":"sgBAAA,IAAAA,EAAAC,EAAA,S,aAAA,MAAMC,EAAWC,SAASC,cAAc,cAElCC,EAAmBF,SAASC,cAAc,sB,iBAW1CE,QAEN,MAAMC,EAGJC,gBAGE,aADuBC,EAAMC,IADN,sGAEPC,KAAKC,O,GAGzBJ,iBAE0B,MAAlBK,EAAwB,IAAIN,EAE5BO,QAAiBD,EAAsBE,UAG7C,GAAwB,IAApBD,EAASE,OAAc,MAAM,IAAIC,MAAM,WAG3C,IAAIC,EAAI,EACR,MAAMC,EAAOL,EAASM,QAAO,CAACC,EAAQC,KAClCjB,EAAiBkB,MAAMC,QAAU,QACnCN,IACA,IAAIO,EAAQ,0GAaZ,OAZ6B,IAAzBH,EAAQI,MAAMV,SAChBS,EAAQH,EAAQI,MAAM,GAAG,kBAAkB,GAAGC,KAWzCN,EAUX,SAA+BC,EAASJ,GAER,MAAxBO,MAAEA,EAAKG,QAAEA,EAAOC,MAAEA,EAAKC,YAAEA,EAAWC,KAAEA,EAAIJ,IAAEA,EAAGK,GAAEA,GAAOV,EA2B9D,OA1BAW,YAAW,KAET,MAAMC,EAAM/B,SAASC,cAAc,kBAAkB4B,KAC/CG,EAAOhC,SAASC,cAAc,eAAe4B,KAC7CI,EAAIjC,SAASC,cAAc,YAAY4B,KACvCb,EAAOhB,SAASC,cAAc,eAAe4B,KAEnD,IAAIK,GAAQ,EACRC,EAAgBtC,EAAAM,QAAoBiC,KAAK,aAKvB,KAFF,EAAAC,EAAAC,mBAAkBnB,EAASgB,KAG7CJ,EAAIQ,UAAYF,EAAAG,sBAChBT,EAAIU,UAAUC,IAAI,yBAEpB,IAAIC,EAAW9C,EAAAM,QAAoBiC,KAAK,kBAEtB,KADF,EAAAC,EAAAC,mBAAkBnB,EAASwB,KAEzCV,EAAEM,UAAYF,EAAAO,YACd5B,EAAKyB,UAAUC,IAAI,YAErBX,EAAIc,SAAU,EAAAR,EAAAS,gBAAeZ,EAAOf,EAASY,GAC7CC,EAAKa,SAAU,EAAAR,EAAAU,YAAW5B,EAASc,EAAGjB,EAAK,GAC1C,GACI,oCAAuCa,oBAAuBd,+DAIxDO,6IAMqBO,2EAENJ,wEAEuBI,eAAkBA,gBAC7DQ,EAAAW,wGAIoBtB,qCACFC,EAAYsB,MAAM,EAAG,KAAO,8EAEzBrB,EAAKqB,MAAM,EAAG,IAAIC,WAAW,IAAK,oDACrBrB,iBAAoBL,oG,CA9D5C2B,CAThBhC,EAAU,CACRG,MAAOA,EACPG,QAASN,EAAQM,QACjBC,MAAOP,EAAQO,MACfC,YAAaR,EAAQiC,SACrBxB,KAAMT,EAAQkC,eACd7B,IAAKL,EAAQK,IACbK,GAAIV,EAAQU,IAEiCd,EAAE,GAChD,IAKL,IAAoBG,IAHPF,EAIXjB,EAASwC,UAAYrB,C,CA8DvBoC,E,sCCxHA,MAAMC,EAAOvD,SAASC,cAAc,SAEpCuD,OAAOC,iBAAiB,QAExB,WACEF,EAAKd,UAAUC,IAAI,SACnBZ,YAAW,KACTyB,EAAKG,QAAQ,GACZ,I","sources":["src/components/mostPopular/mostPopular.js","src/components/preLoader/preLoader.js"],"sourcesContent":["const newsList = document.querySelector('.news-list');\nconst API_KEY = 'api-key=HR9YxGV98GGTmMcKHA5eY4Aer5nJgRvJ';\nconst weatherContainer = document.querySelector('.weather-container');\n\nimport localStorageService from '../localStorageService/localStorageService';\nimport {\n  removeFavoriteBtnHTML,\n  addFavoriteBtnHTML,\n  alreadyRead,\n  handleFavorite,\n  handleRead,\n  checkLokalStorage,\n} from '../render/render';\nconst axios = require('axios').default;\n\nclass MostPopularApiService {\n\n\n  async getNews() {\n    const mostPopularUrl = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${API_KEY}`;\n    const response = await axios.get(mostPopularUrl);\n    return response.data.results;\n  }\n}\nasync function render() {\n  //рендерить  популярні новини\n  const mostPopularApiService = new MostPopularApiService();\n\n  const articles = await mostPopularApiService.getNews();\n\n\n  if (articles.length === 0) throw new Error('No data');\n\n\n  let i = 0;\n  const card = articles.reduce((markup, article) => {\n      weatherContainer.style.display = 'block';\n    i++;\n    let image = `https://cdn.create.vista.com/api/media/small/251043028/stock-photo-selective-focus-black-news-lettering`;\n    if (article.media.length !== 0) {\n      image = article.media[0]['media-metadata'][2].url;\n    }\n    article = {\n      image: image,\n      section: article.section,\n      title: article.title,\n      description: article.abstract,\n      date: article.published_date,\n      url: article.url,\n      id: article.id,\n    };\n    return markup + createMostPopularNews(article, i);\n  }, '');\n\n  updateCard(card);\n}\n\nfunction updateCard(markup) {\n  newsList.innerHTML = markup;\n}\n\nfunction createMostPopularNews(article, i) {\n  // створює розмітку популярних новин\n  const { image, section, title, description, date, url, id } = article;\n  setTimeout(() => {\n    // виконається після того як з'являться картки\n    const btn = document.querySelector(`.favorite-btn--${id}`);\n    const link = document.querySelector(`.news-link--${id}`);\n    const p = document.querySelector(`.isread--${id}`);\n    const card = document.querySelector(`.news-card--${id}`);\n\n    let isFav = false;\n    let localFavorite = localStorageService.load('favorite');\n    \n    \n    let checkFavorite = checkLokalStorage(article, localFavorite);\n\n    if (checkFavorite === true) {\n      btn.innerHTML = removeFavoriteBtnHTML;\n      btn.classList.add('favorite-btn--active');\n    }\n    let localArr = localStorageService.load('readMoreLocal');\n    let checkRead = checkLokalStorage(article, localArr);\n    if (checkRead === true) {\n      p.innerHTML = alreadyRead;\n      card.classList.add('opacity');\n    }\n    btn.onclick = handleFavorite(isFav, article, btn);\n    link.onclick = handleRead(article, p, card);\n  }, 0);\n  return `<div class=\"news-card ${`news-card--${id}`} grid grid-item-${i}\">\n\n    <div class=\"top-wrap\">\n      <img\n        src=\"${image}\"\n        loading=\"lazy\"\n        width=\"288\"\n        height=\"395\"\n        class=\"news-img\"\n      />\n      <p class=\"isread ${`isread--${id}`}\"></p>\n      <div class=\"category-wrap\">\n        <p class=\"top-text\">${section}</p>\n      </div>\n      <button class=\"favorite-btn ${`favorite-btn--${id}`}\" data-id=\"${id}\">\n        ${addFavoriteBtnHTML}\n      </button>\n    </div>\n    <div class=\"info\">\n      <h2 class=\"info-item\">${title}</h2>\n      <p class=\"describe\">${description.slice(0, 150) + '...'}</p>\n      <div class=\"lower-content\">\n        <p class=\"news-date\">${date.slice(0, 10).replaceAll('-', '/')}</p>\n        <a class=\"news-link ${`news-link--${id}`} link\" href=\"${url}\"  onclick=\"handleRead()\" target=\"_blank\">Read more</a>\n      </div>\n    </div>\n  </div>\n  \n`;\n}\nrender();\n","const mask = document.querySelector('.mask');\n\nwindow.addEventListener('load', getRemuveLoader);\n\nfunction getRemuveLoader() {\n  mask.classList.add('.hide');\n  setTimeout(() => {\n    mask.remove();\n  }, 600);\n}\n"],"names":["$1EaU7","parcelRequire","$b099375bc21d7969$var$newsList","document","querySelector","$b099375bc21d7969$var$weatherContainer","default","$b099375bc21d7969$var$MostPopularApiService","async","$b099375bc21d7969$require$axios","get","data","results","mostPopularApiService","articles","getNews","length","Error","i","card","reduce","markup","article","style","display","image","media","url","section","title","description","date","id","setTimeout","btn","link","p","isFav","localFavorite","load","$aet5G","checkLokalStorage","innerHTML","removeFavoriteBtnHTML","classList","add","localArr","alreadyRead","onclick","handleFavorite","handleRead","addFavoriteBtnHTML","slice","replaceAll","$b099375bc21d7969$var$createMostPopularNews","abstract","published_date","$b099375bc21d7969$var$render","$036fc8d6152ac2d4$var$mask","window","addEventListener","remove"],"version":3,"file":"index.71bc5ec6.js.map"}