{"mappings":"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","sources":["src/components/mostPopular/mostPopular.js","src/components/preLoader/preLoader.js"],"sourcesContent":["const newsList = document.querySelector('.news-list');\nconst API_KEY = 'api-key=HR9YxGV98GGTmMcKHA5eY4Aer5nJgRvJ';\nconst weatherContainer = document.querySelector('.weather-container');\n\nimport localStorageService from '../localStorageService/localStorageService';\nimport {\n  removeFavoriteBtnHTML,\n  addFavoriteBtnHTML,\n  alreadyRead,\n  handleFavorite,\n  handleRead,\n  checkLokalStorage,\n} from '../render/render';\nconst axios = require('axios').default;\n\nclass MostPopularApiService {\n\n\n  async getNews() {\n    const mostPopularUrl = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?${API_KEY}`;\n    const response = await axios.get(mostPopularUrl);\n    return response.data.results;\n  }\n}\nasync function render() {\n  //рендерить  популярні новини\n  const mostPopularApiService = new MostPopularApiService();\n\n  const articles = await mostPopularApiService.getNews();\n\n\n  if (articles.length === 0) throw new Error('No data');\n\n\n  let i = 0;\n  const card = articles.reduce((markup, article) => {\n      weatherContainer.style.display = 'block';\n    i++;\n    let image = `https://cdn.create.vista.com/api/media/small/251043028/stock-photo-selective-focus-black-news-lettering`;\n    if (article.media.length !== 0) {\n      image = article.media[0]['media-metadata'][2].url;\n    }\n    article = {\n      image: image,\n      section: article.section,\n      title: article.title,\n      description: article.abstract,\n      date: article.published_date,\n      url: article.url,\n      id: article.id,\n    };\n    return markup + createMostPopularNews(article, i);\n  }, '');\n\n  updateCard(card);\n}\n\nfunction updateCard(markup) {\n  newsList.innerHTML = markup;\n}\n\nfunction createMostPopularNews(article, i) {\n  // створює розмітку популярних новин\n  const { image, section, title, description, date, url, id } = article;\n  setTimeout(() => {\n    // виконається після того як з'являться картки\n    const btn = document.querySelector(`.favorite-btn--${id}`);\n    const link = document.querySelector(`.news-link--${id}`);\n    const p = document.querySelector(`.isread--${id}`);\n    const card = document.querySelector(`.news-card--${id}`);\n\n    let isFav = false;\n    let localFavorite = localStorageService.load('favorite');\n    \n    \n    let checkFavorite = checkLokalStorage(article, localFavorite);\n\n    if (checkFavorite === true) {\n      btn.innerHTML = removeFavoriteBtnHTML;\n      btn.classList.add('favorite-btn--active');\n    }\n    let localArr = localStorageService.load('readMoreLocal');\n    let checkRead = checkLokalStorage(article, localArr);\n    if (checkRead === true) {\n      p.innerHTML = alreadyRead;\n      card.classList.add('opacity');\n    }\n    btn.onclick = handleFavorite(isFav, article, btn);\n    link.onclick = handleRead(article, p, card);\n  }, 0);\n  return `<div class=\"news-card ${`news-card--${id}`} grid grid-item-${i}\">\n\n    <div class=\"top-wrap\">\n      <img\n        src=\"${image}\"\n        loading=\"lazy\"\n        width=\"288\"\n        height=\"395\"\n        class=\"news-img\"\n      />\n      <p class=\"isread ${`isread--${id}`}\"></p>\n      <div class=\"category-wrap\">\n        <p class=\"top-text\">${section}</p>\n      </div>\n      <button class=\"favorite-btn ${`favorite-btn--${id}`}\" data-id=\"${id}\">\n        ${addFavoriteBtnHTML}\n      </button>\n    </div>\n    <div class=\"info\">\n      <h2 class=\"info-item\">${title}</h2>\n      <p class=\"describe\">${description.slice(0, 150) + '...'}</p>\n      <div class=\"lower-content\">\n        <p class=\"news-date\">${date.slice(0, 10).replaceAll('-', '/')}</p>\n        <a class=\"news-link ${`news-link--${id}`} link\" href=\"${url}\"  onclick=\"handleRead()\" target=\"_blank\">Read more</a>\n      </div>\n    </div>\n  </div>\n  \n`;\n}\nrender();\n","const mask = document.querySelector('.mask');\n\nwindow.addEventListener('load', getRemuveLoader);\n\nfunction getRemuveLoader() {\n  mask.classList.add('.hide');\n  setTimeout(() => {\n    mask.remove();\n  }, 600);\n}\n"],"names":["$bpxeT","parcelRequire","$3cffbc879893e8d2$var$newsList","document","querySelector","$3cffbc879893e8d2$var$weatherContainer","default","$3cffbc879893e8d2$var$MostPopularApiService","MostPopularApiService","key","$parcel$interopDefault","$2TvXO","mark","_callee","mostPopularUrl","response","concat","$3cffbc879893e8d2$require$axios","get","_ctx","sent","data","results","$3cffbc879893e8d2$var$_render","mostPopularApiService","articles","i","getNews","length","Error","$3cffbc879893e8d2$var$updateCard","reduce","markup","article","style","display","image","media","url","$3cffbc879893e8d2$var$createMostPopularNews","section","title","description","abstract","date","published_date","id","apply","this","arguments","innerHTML","setTimeout","btn","link","p","card","localFavorite","$5OG1Q","load","$hqWnV","checkLokalStorage","removeFavoriteBtnHTML","classList","add","localArr","alreadyRead","onclick","handleFavorite","handleRead","addFavoriteBtnHTML","slice","replaceAll","$3cffbc879893e8d2$var$render","$3f50aa7921330560$var$mask","window","addEventListener","remove"],"version":3,"file":"index.ad57bc48.js.map"}